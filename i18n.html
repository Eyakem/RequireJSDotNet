<!DOCTYPE html>
<html lang="en">

<head>
	
    <meta charset="utf-8">

	<title>RequireJS.NET - ResxToJs</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="MsBuild task for ASP.NET projects that outputs specified keys from a resx file in RequireJS i18n format.">
    <meta name="keywords" content="requirejs, javascript, asp.net, resx, msbuild, i18n, internationalization">
	<meta name="author" content="VeriTech">
	
	<meta name="twitter:card" content="summary">
	<meta name="twitter:site" content="@vtfuture">
	<meta name="twitter:creator" content="@vtfuture">
	<meta name="twitter:title" content="RequireJS.NET">
	<meta name="twitter:description" content="RequireJS for .NET brings asynchronous JavaScript loading and flexible js bundling configuration to ASP.NET MVC projects.">
	<meta name="twitter:image:src" content="http://requirejsnet.veritech.io/img/require-128x128.png">
	
	<meta property="og:locale" content="en_US" />
	<meta property="og:title" content="RequireJS.NET" />
	<meta property="og:url" content="http://requirejsnet.veritech.io/" />
	<meta property="og:image" content="http://requirejsnet.veritech.io/img/require-logo.png" />
	<meta property="og:type" content="website" />
	
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

	<link rel="shortcut icon" href="img/favicon.png">
	<link rel="icon" type="image/png" href="img/favicon.png" />

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <link href="css/site.css" rel="stylesheet">

</head>

<body class="secondary">
	
	<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header" data-scroll-header="">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="http://requirejsnet.veritech.io"><img src="img/require-logo.png" alt="RequireJS.NET" width="136" height="51"></a>
            </div>

            <div class="collapse navbar-collapse navbar-right navbar-ex1-collapse">
                <ul class="nav navbar-nav">
					<li><a href="index.html">Home</a>
                    </li>
                    <li><a href="setup.html">Setup</a>
                    </li>
                    <li><a href="compressor.html">Bundling</a>
                    </li>
					<li class="active"><a href="i18n.html">i18n</a>
                    </li>
	            </ul>
            </div>
        </div>
    </nav>
	
	<div class="feature">
		<div class="container secondary">
			<h1>
				Export .resx to JavaScript using <strong>ResxToJs</strong> MsBuild task
			</h1>
		</div>
		
	</div>
	
	<div class="site-content">
		<div class="container">	
			<p>
				ResxToJs is a MSBuild task that outputs specified keys from a resx file in RequireJS i18n format.	
			</p>			
			<h5>Download</h5>
			<p>
				Install <a href="http://www.nuget.org/packages/RequireJsNet.ResxToJs/">ResxToJs</a> nuget package <br/> <kbd>PM> Install-Package RequireJsNet.ResxToJs</kbd>
			</p>
			<h5>Create resx files</h5>
			<p>
				Add a new resx file to your ASP.NET MVC project and name it <strong>Resource.resx</strong>. Open the file in VS.NET and set the access modifier to <code>Public</code>, now you can add a file per supported language using the naming: <strong>Resource.en-US.resx</strong>, <strong>Resource.ro-RO.resx</strong>.							
			</p>
			<p>
				Add some entries to your resources and mark the ones that you want to use in javascript with the <strong>js</strong> comment. You only have to add this comment in the 
				Resources.resx file.						
			</p>
			<img class="site-img" src="img/resxcomment.jpg"/>
			<h5>JS file structure</h5>
			<p>
				Create a new folder inside your scripts folder, named <strong>Nls</strong>. This is going to be the location where your JavaScript resource files will be generated.										
			</p>
			<p>
				Inside the Nls folder add a new JavaScript file, named <strong>app-resx.js</strong>, in which we are going to list the cultures that we want to be outputted. 								
			</p>
			<pre class="prettyprint">
define({
	'root': true,
	'en': true,
	'ro': true
});</pre>
			
			<h5>MsBuils Task</h5>
				<p>
					Create a new folder inside your project, named <strong>.build</strong>, in which you will add the file containing the task, named <strong>ResxToJs.targets</strong>, with the following content:											
				</p>
				<pre class="prettyprint">&lt;Project xmlns=&quot;http://schemas.microsoft.com/developer/msbuild/2003&quot;&gt;<br/>  &lt;UsingTask TaskName=&quot;ResxToJsTask&quot; AssemblyFile=&quot;..\bin\RequireJsNet.ResxToJs.dll&quot; /&gt;<br/>  &lt;Target Name=&quot;ResxForBuild&quot; AfterTargets=&quot;AfterBuild&quot;&gt;<br/>    &lt;MsBuild Projects=&quot;$(MSBuildProjectFile)&quot; Targets=&quot;Resources&quot; Properties=&quot;DestinationDir=$(MSBuildProjectDirectory)&quot; /&gt;<br/>  &lt;/Target&gt;<br/>  &lt;Target Name=&quot;ResourcesForDeploy&quot; AfterTargets=&quot;CopyAllFilesToSingleFolderForMsdeploy&quot;&gt;<br/>    &lt;MsBuild Projects=&quot;$(MSBuildProjectFile)&quot; Targets=&quot;Resources&quot; Properties=&quot;DestinationDir=$(_PackageTempDir)&quot; /&gt;<br/>  &lt;/Target&gt;<br/>  &lt;Target Name=&quot;Resources&quot;&gt;<br/>    &lt;ResxToJsTask RootResx=&quot;$(MSBuildProjectDirectory)\Resources\Resource.resx&quot; RootJS=&quot;$(DestinationDir)\Scripts\Nls\app-resx.js&quot; /&gt;<br/>  &lt;/Target&gt;<br/>&lt;/Project&gt;</pre>

				<p>
					Add the following line at the end of your .csproj to import the <strong>ResxToJs.targets</strong>:
				</p>
				<pre class="prettyprint">&lt;Import Project=&quot;.build\ResxToJs.targets&quot; /&gt;</pre>
				
			<h5>Output files</h5>
				<p>Now you should build the project and check the Output window. If all goes according to plan you will see a message telling how long it took for the resources to be generated. If you check the <strong>Nls</strong> folder you will see a similar structure to this:</p>
				<img class="site-img" src="img/i18n-folders.png"/>
				<p>Because the *-resx.js files will be generated on each build, there is no need to keep them on the source repository, in order to exclude them from git you can add the following lines to <code>.gitignore</code> file.</p>
				
				<pre class="prettyprint">
# ignore ResxToJs generated files
**/Scripts/Nls/*
!**/Scripts/Nls/app-resx.js</pre>
				
			<h5>Javascript usage</h5>
			<p>If you want to retrieve the resources in your client side code you should use the <a href="http://requirejs.org/docs/api.html#i18n">i18n RequireJS plugin</a> that comes with the <a href="http://www.nuget.org/packages/RequireJsNet.Scripts/">RequireJsNet.Scripts</a> package. Add the i18n plugin to the paths config in <code>RequireJS.json</code> file.</p>
			<pre class="prettyprint">
{
    "paths": {
        "jquery": "jquery-1.10.2",
        "bootstrap": "bootstrap",
        "i18n": "Components/RequireJS/i18n",
        "text": "Components/RequireJS/text"
    },
    "shim": {
        "bootstrap": { 
            "deps":  ["jquery"]
        }
    }
}</pre>
			<p>The current culture is determined on the server-side by the <code>System.Threading.Thread.CurrentThread.CurrentUICulture</code> property and attached to the requireConfig global object.</p>
			<p>The following code should output an object containing the <strong>js</strong> marked keys from your resx file.</p>
			<pre class="prettyprint">
require([
'i18n!nls/app-resx'
], function (resx) {
console.log(resx);
});</pre>				
			
			<h5>More info</h5>
			<p>For more information on RequireJS.NET features please read the <a href="https://github.com/vtfuture/RequireJSDotNet/wiki" target="_blank" rel="nofollow">wiki</a> and check out the <a href="https://github.com/stefanprodan/RequireJsNet.Samples" target="_blank" rel="nofollow">samples</a>. If you have suggestion or any kind of feedback regarding RequireJS.NET project please submit an issue <a href="https://github.com/vtfuture/RequireJSDotNet/issues" target="_blank" rel="nofollow">here</a>.</p>			
		</div>
			
		
	</div>
	
		
	</div>
	
	<div class="footer" id="contact">	
		<div class="container">			
			<p class="pull-left">2014 Â© VeriTech.io <br />All Rights Reserved</p>
			<a class="pull-right" href="http://veritech.io"><img src="img/veritech-logo-site@2x.png" alt="VeriTech" width="63" height="40"></a>
		</div>		
	</div>
	
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
	<script src="js/smoothscroll.min.js"></script>
	<script src="js/smooth-scroll.min.js"></script>
	<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
	
	<script type="text/javascript">
		jQuery(function () {			  			  
			  //Scroll
			  smoothScroll.init();					    
		});		
	</script>
	 <script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-53462137-3', 'auto');
	  ga('send', 'pageview');
	</script>
</body>

</html>
